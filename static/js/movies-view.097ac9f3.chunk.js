(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{34:function(e,t,a){"use strict";var r=a(36),n=a.n(r),c=a(37),o=a(43),u=a.n(o),s="5108029e3911ea6cb16f2c405843061d";u.a.defaults.baseURL="https://api.themoviedb.org";var i=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a,r,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,e.prev=1,e.next=4,u.a.get("/3/trending/all/day?api_key=".concat(s,"&page=").concat(t));case 4:return a=e.sent,r=a.data.results,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,o=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,e.prev=1,e.next=4,u.a.get("/3/search/movie?api_key=".concat(s,"&language=en-US&query=").concat(t,"&page=").concat(a,"&include_adult=false"));case 4:return r=e.sent,c=r.data,e.abrupt("return",c.results);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"/credits?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,e.abrupt("return",a.data.cast);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"/reviews?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,r=a.data,e.abrupt("return",r.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b={fetchMovies:l,fetchMovieDetails:h,fetchTrendingMovies:i,fetchMovieCast:p,fetchMovieReview:f};t.a=b},44:function(e,t,a){"use strict";var r=a(45),n=a.n(r),c=a(1);t.a=function(e){var t=e.onLoadMore;return Object(c.jsx)("button",{type:"button",className:n.a.Button,onClick:function(){return t()},children:"Load more"})}},45:function(e,t,a){e.exports={Button:"Button_Button__3OBlI"}},77:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__2Qckl",SearchForm:"SearchBar_SearchForm__R51D6",SearchFormButton:"SearchBar_SearchFormButton__1FF_5",SearchFormButtonLabel:"SearchBar_SearchFormButtonLabel__2OxS4",SearchFormInput:"SearchBar_SearchFormInput__1mJSE"}},90:function(e,t,a){"use strict";a.r(t);var r=a(36),n=a.n(r),c=a(47),o=a(37),u=a(35),s=a(0),i=a(34),l=a(16),h=a(84),p=a(77),f=a.n(p),b=a(85),v=a(2),m=a(1);var j=function(e){var t=e.onSubmit,a=Object(s.useState)(""),r=Object(u.a)(a,2),n=r[0],c=r[1],o=Object(v.g)(),i=Object(v.h)();return Object(m.jsx)("div",{children:Object(m.jsx)("header",{className:f.a.Searchbar,children:Object(m.jsxs)("form",{className:f.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===n.trim())return b.a.error("Enter your query!");o.push(Object(h.a)(Object(h.a)({},i),{},{search:"query=".concat(n)})),t(n),c("")},children:[Object(m.jsx)("button",{type:"submit",className:f.a.SearchFormButton,children:Object(m.jsx)("span",{className:f.a.SearchFormButtonLabel,children:"Search"})}),Object(m.jsx)("input",{name:"query",value:n,onChange:function(e){c(e.target.value.toLowerCase())},className:f.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies"})]})})})},d=a(44);t.default=function(){var e,t=Object(s.useState)(""),r=Object(u.a)(t,2),h=r[0],p=r[1],f=Object(s.useState)([]),b=Object(u.a)(f,2),g=b[0],O=b[1],S=Object(s.useState)(1),x=Object(u.a)(S,2),_=x[0],w=x[1],y=Object(s.useState)(!1),k=Object(u.a)(y,2),B=k[0],F=k[1],L=Object(v.h)(),M=null!==(e=new URLSearchParams(L.search).get("query"))&&void 0!==e?e:"",N=Object(s.lazy)((function(){return a.e(7).then(a.bind(null,56))}));Object(s.useEffect)((function(){if(M){F(!0);var e=function(){var e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.fetchMovies(M,h,_);case 3:t=e.sent,O((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))})),1!==_&&U(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:return e.prev=11,F(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[_,h,M]);var U=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},q=0!==g.length,C=g.length>0&&g.length>=20;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.Suspense,{fallback:Object(m.jsx)(l.a,{}),children:Object(m.jsxs)(v.b,{exact:!0,path:"/movies",children:[Object(m.jsx)(j,{onSubmit:function(e){p(e),O([])}}),q&&Object(m.jsx)(N,{movies:g})]})}),C&&Object(m.jsx)(d.a,{onLoadMore:function(){F(!B),w((function(e){return e+1})),F(B)}})]})}}}]);
//# sourceMappingURL=movies-view.097ac9f3.chunk.js.map