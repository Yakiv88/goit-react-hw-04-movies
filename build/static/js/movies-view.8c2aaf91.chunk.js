(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{34:function(e,t,a){"use strict";var n=a(37),r=a.n(n),c=a(38),o=a(43),u=a.n(o),s="5108029e3911ea6cb16f2c405843061d";u.a.defaults.baseURL="https://api.themoviedb.org";var i=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,e.prev=1,e.next=4,u.a.get("/3/trending/all/day?api_key=".concat(s,"&page=").concat(t));case 4:return a=e.sent,n=a.data.results,e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,e.prev=1,e.next=4,u.a.get("/3/search/movie?api_key=".concat(s,"&language=en-US&query=").concat(t,"&page=").concat(a,"&include_adult=false"));case 4:return n=e.sent,c=n.data,e.abrupt("return",c.results);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"/credits?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,e.abrupt("return",a.data.cast);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/3/movie/".concat(t,"/reviews?api_key=").concat(s,"&language=en-US"));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f={fetchMovies:l,fetchMovieDetails:h,fetchTrendingMovies:i,fetchMovieCast:p,fetchMovieReview:b};t.a=f},44:function(e,t,a){"use strict";var n=a(45),r=a.n(n),c=a(1);t.a=function(e){var t=e.onLoadMore;return Object(c.jsx)("button",{type:"button",className:r.a.Button,onClick:function(){return t()},children:"Load more"})}},45:function(e,t,a){e.exports={Button:"Button_Button__3OBlI"}},80:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__2Qckl",SearchForm:"SearchBar_SearchForm__R51D6",SearchFormButton:"SearchBar_SearchFormButton__1FF_5",SearchFormButtonLabel:"SearchBar_SearchFormButtonLabel__2OxS4",SearchFormInput:"SearchBar_SearchFormInput__1mJSE"}},90:function(e,t,a){"use strict";a.r(t);var n=a(37),r=a.n(n),c=a(50),o=a(38),u=a(36),s=a(0),i=a(34),l=a(16),h=a(85),p=a(80),b=a.n(p),f=a(86),v=a(2),j=a(1);var m=function(e){var t=e.onSubmit,a=Object(s.useState)(""),n=Object(u.a)(a,2),r=n[0],c=n[1],o=Object(v.f)(),i=Object(v.g)();return Object(j.jsx)("div",{children:Object(j.jsx)("header",{className:b.a.Searchbar,children:Object(j.jsxs)("form",{className:b.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===r.trim())return f.a.error("Enter your query!");o.push(Object(h.a)(Object(h.a)({},i),{},{search:"query=".concat(r)})),t(r),c("")},children:[Object(j.jsx)("button",{type:"submit",className:b.a.SearchFormButton,children:Object(j.jsx)("span",{className:b.a.SearchFormButtonLabel,children:"Search"})}),Object(j.jsx)("input",{name:"query",value:r,onChange:function(e){c(e.target.value.toLowerCase())},className:b.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies"})]})})})},d=a(44);t.default=function(){var e,t=Object(s.useState)(""),n=Object(u.a)(t,2),h=n[0],p=n[1],b=Object(s.useState)([]),f=Object(u.a)(b,2),O=f[0],g=f[1],S=Object(s.useState)(1),x=Object(u.a)(S,2),_=x[0],y=x[1],w=Object(s.useState)(!1),k=Object(u.a)(w,2),F=k[0],B=k[1],L=Object(v.h)().path,M=Object(v.g)(),N=null!==(e=new URLSearchParams(M.search).get("query"))&&void 0!==e?e:"",U=Object(s.lazy)((function(){return a.e(7).then(a.bind(null,84))})),q=Object(s.lazy)((function(){return a.e(8).then(a.bind(null,59))}));Object(s.useEffect)((function(){if(N){B(!0);var e=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.fetchMovies(N,h,_);case 3:t=e.sent,g((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))})),1!==_&&C(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:return e.prev=11,B(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}}),[_,h,N]);var C=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},I=0!==O.length,E=O.length>0&&O.length>=20;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.Suspense,{fallback:Object(j.jsx)(l.a,{}),children:Object(j.jsxs)(v.c,{children:[Object(j.jsx)(v.a,{path:"".concat(L,"/:movieId"),children:Object(j.jsx)(U,{})}),Object(j.jsxs)(v.a,{exact:!0,path:"/movies",children:[Object(j.jsx)(m,{onSubmit:function(e){p(e),g([])}}),I&&Object(j.jsx)(q,{movies:O})]})]})}),E&&Object(j.jsx)(d.a,{onLoadMore:function(){B(!F),y((function(e){return e+1})),B(F)}})]})})}}}]);
//# sourceMappingURL=movies-view.8c2aaf91.chunk.js.map